const CONFIG = require("./config");

module.exports = {
    MP4: [
        "-movflags",
        "+faststart",
        "-preset",
        "ultrafast",
        "-r",
        "30",
        "-tune",
        "zerolatency",
        "-c:v",
        "libx264",
        "-pix_fmt",
        "yuv420p",
        "-b:v",
        "600k",
        "-crf",
        "30",
        "-minrate",
        "300k",
        "-maxrate",
        "600k",
        "-bufsize",
        "1200k",
        "-an",
        "-analyzeduration",
        "512",
        "-probesize",
        "128",
        "-f",
        "mpegts",
    ],
    DASH: [
        "-movflags",
        "+faststart+frag_keyframe+empty_moov",
        "-tune",
        "zerolatency",
        "-an",
        "-analyzeduration",
        "256",
        "-probesize",
        "32",
        "-preset",
        "-threads",
        "2",
        "ultrafast",
        "-framerate",
        CONFIG.fps,
        "-r",
        CONFIG.fps,
        "-g",
        CONFIG.fps,
        "-bsf:v",
        "h264_mp4toannexb",
        "-c:v",
        "libx264",
        "-pix_fmt",
        "yuv420p",
        "-b:v",
        "600k",
        "-crf",
        "24",
        "-minrate",
        "80k",
        "-maxrate",
        "600k",
        "-bufsize",
        "1200k",
        "-x264opts",
        `keyint=${CONFIG.fps}:min-keyint=${
            CONFIG.fps
        }:no-scenecut:8x8dct:sliced-threads=0:scenecut=-1`,
        "-deblock",
        "1:1",
        "-an",
        "-f",
        "dash",
        "-window_size",
        "6",
        "-extra_window_size",
        "20",
        "-min_seg_duration",
        "4000000",
        "-use_timeline",
        "1",
        "-use_template",
        "1",
        "-remove_at_exit",
        "1",
    ],
    WEBM: ["-c:v", "libvpx", "-r", CONFIG.fps, "-g", CONFIG.fps],
};
